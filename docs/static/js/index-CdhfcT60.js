import{L as P}from"./element-plus-Bkvcev_h.js";import{d as T,e as z,c as B,i as F}from"./index-BWfYeg8c.js";import{r as u,b as k,u as n,w as C,n as I,Z as L,O as h,o as y,P as x,V as R,Y as j,H as O}from"./@vue-dAAkPkS-.js";import"./dayjs-NaOncrXL.js";import"./lodash-es-ClQ57oLH.js";import"./@element-plus-CtSTv4PF.js";import"./@sxzz-D_chPuIy.js";import"./@vueuse-DCTyNzad.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./vue-router-DuCPIwFL.js";import"./pinia-COY4OCD2.js";import"./axios-t--hEgTQ.js";import"./nprogress-BUPCWICh.js";/* empty css                      */import"./pinia-plugin-persistedstate-BQU3TZ4K.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";import"./vue-echarts-BPvQK7WU.js";import"./echarts-1ln0nKje.js";import"./zrender-BxIALAev.js";import"./tslib-BDyQ-Jie.js";import"./@iconify-BJukWOdu.js";const V=(v={})=>{const{api:d,searchInfo:s,listField:g="rows",afterFetch:r="",formatParams:l="",immediate:f=!0}=v,a=u({pageNum:1,pageSize:10,total:0}),t=u(!1),o=u(null),p=u([]),i=[],_=e=>{o.value?e():i.push(e)},b=()=>{I(()=>{i.forEach(e=>e()),i.length=0})},N=e=>{o.value=e,a.value.pageNum=e.params.pageNum,a.value.pageSize=e.params.pageSize,C([()=>e.params.pageNum,()=>e.params.pageSize],([c,w])=>{a.value.pageNum=c,a.value.pageSize=w,m()}),b()},m=async()=>{try{t.value=!0;let e={};l&&l instanceof Function?e=l(n(s)):e=n(s);const c=await d({...a.value,...e});p.value=c[g]||[],r&&r instanceof Function&&(p.value=r(p.value)),a.value.total=c.total||0,_(()=>{o.value.updateParams({total:c.total||0})})}catch(e){console.log(e)}finally{t.value=!1}},S=()=>{a.value.pageNum=1,o.value&&o.value.updateParams({pageNum:1}),m()};return k(()=>{f&&m()}),[N,{data:p,params:a,getList:m,reload:S,loading:t}]},D={list:[{label:"名称",type:"input",prop:"name"},{label:"名344",type:"select",placeholder:"请选择你的值",prop:"test2",options:[{value:"1",label:"1"},{value:"2",label:"2"}]},{label:"名称1",type:"input",prop:"name1"},{label:"名称2",type:"input",prop:"name2"},{label:"名称3",type:"input",prop:"name3"},{label:"名称4",type:"input",prop:"name4"},{label:"名称5",type:"input",prop:"name5"}]},ie={__name:"index",setup(v){const d=[{type:"index",label:"序号",width:60},{label:"名字",prop:"name"},{label:"职位",prop:"postCn"},{label:"性别",prop:"sexCn"}],s=L({projectId:"5d8b1afc-ceb5-4b07-9d04-1269984e7697"}),g=t=>{Object.assign(s,t),a()},[r,{data:l,loading:f,reload:a}]=V({api:F,searchInfo:s});return(t,o)=>{const p=z,i=T,_=B,b=P;return y(),h(_,{class:"p-20px"},{default:x(()=>[R((y(),h(i,{onRegister:n(r),columns:d,data:n(l)},{header:x(()=>[j(p,O(n(D),{onSearch:g}),null,16)]),_:1},8,["onRegister","data"])),[[b,n(f)]])]),_:1})}}};export{ie as default};
